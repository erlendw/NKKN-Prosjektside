<header class="intro-header" style="background-image: url('img/post-bg.jpg')">
    <div class="container">
        <div class="row">

                <div class="post-heading">
                    <h1>"We must set down the subject itself, its definitions and all its properties"</h1>
                    <h2 class="subheading">-Aristotle</h2>
                </div>
            </div>

    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
                <dl class="dl-horizontal">

                    <h1 class="page-header">1 NKKN Webplattform 2016</h1>

                    <br>

                    <dt>Oppdagsgiver:</dt>
                    <dd>NKKN (Norsk Klassifisering, Koding og Nomenklatur)</dd>

                    <hr>

                    <dt>Prosjekttittel:</dt>
                    <dd>NKKN Webplattform 2016</dd>

                    <hr>

                    <dt>Oppgave:</dt>
                    <dd>Webapplikasjon med database sentrert rundt medisinsk utstyr(MU) som brukers på Norske Helseforetak.</dd>

                    <hr>

                    <dt>Gruppenummer:</dt>
                    <dd>2</dd>

                    <hr>

                    <dt>medlemmer:</dt>
                    <dd>Erlend Westbye, studentnr: 193377
                        Mads Myrbakken Karlstad, studentnr: 193949
                        William Benjamin Wold, studentnr: 183670
                    </dd>

                    <hr>

                    <dt>Talsmann</dt>
                    <dd>William Benjamin Wold, studentnr: 183670</dd>

                    <hr>

                    <dt>Intern Veileder:</dt>
                    <dd>Kirsten Ribu</dd>

                    <hr>

                    <dt>Ekstern Veil. :</dt>
                    <dd>Øystein Jensen (OUS MTV), Line Chr. Greve (OUS MTV)</dd>

                    <hr>

                </dl>

                <div class="row">

                    <h2 class="page-header">1.1 Oppdragsgiveren</h2>

                    <p>

                        NKKN ble i juli 1994 oprettet som en landsdekkende funksjon for å ivareta det norske behovet for et nomenklatur for medisinsk teknisk utstyr (MTU), som var velegnet for bruk i moderne databaser. Siden har nomenklaturets omfang blitt utvidet til medisinsk utstyr (MU) for å være i overensstemmelse med EUs gjeldende direktiver.

                    </p>

                    <p>Den opprinnelige målsetting var følgende:</p>


                    <ul>
                        <li>Utvikle, oppdatere og distribuere et nomenklatur (utstyrsgrupper) for medisinsk utstyr som kunne benyttes til ulike formål av alle aktører i helsesektoren.</li>
                        <li>Ha et så godt som mulig oppdatert utstyrstyperegister tilgjengelig.</li>
                        <li>Harmonisere alt arbeid med tilsvarende internasjonale aktiviteter på området, og aktivt påvirke de europeiske prosessene omkring utvikling av et fremtidig europeisk nomenklatur.</li>
                    </ul>

                    <p class="text-muted">Utdrag fra <a href="http://nkkn.medtekn.no/">nkkn.medtekn.no</a></p>

                    <p>

                        På hvert helseforetak finnes det medisinsk utstyr(MU). Dette er utstyr som er omfattet av et særegent lovverk, noe som gir utstyret særegne krav. MU har derfor et behov for å ha omfattende korrekt informasjon på tvers av lokasjoner. NKKN er funksjonen som skal ivareta denne informasjonen nasjonalt i Norge. Når en helseansatt skal fåreta en registrering av MU i et gitt datasystem skal denne informasjonen hentes fra NKKN-databasen.

                    </p>



                </div>

                <div class="row">

                    <h2 class="page-header">1.2 Oppgaven</h2>

                    <p>

                        I Helse Norge pågår det et prosjekt for å samfatte all MU-utstyrsdata på alle Norske helseforetak inn i en nasjonal database. Denne databasen henter sin utstyrsinformasjon fra NKKN-databasen. Oppdragsgiver har i lengre tid ønsket en ny plattform fordi den eksisterende databasen er i noen tilfeller tungvint å jobbe med og mangelfullt dokumentert. I tillegg er det ønskelig at NKKN skal kunne fungere med flere systemer enn de som støttes i dag.

                    </p>

                </div>

                <div class="row">

                    <h1 class="page-header">2 Sammendrag</h1>

                    <p>Gjennom høst 2015/vår 2016 skal vi utvikle en ny plattform for NKKN i samarbeid med sentrale personer innenfor norske helseforetak. Prosjektet er i sin helhet smidig, og løsningen skal være oppe for brukertesting innen mars 2016 den skal deretter videreutvikles og testes ut med brukere ut prosjektperioden for å gå “live” innen vår 2016. </p>

                    <p>Oppgaven vi har fått tildelt vil ha tre hovedfokus: </p>


                    <ul>
                        <li>Enkel brukerfunksjonalitet for vedlikehold/oppslag av databasen via nettleser</li>
                        <li>Integrasjon ut mot andre databaser for MU</li>
                        <li>Løse problemer rundt forespørsler om nyregiseringer av MU i databasen slik at ikke samme utstyr får forskjellige nøkler.</li>
                    </ul>

                    <p>

                        Vårt hovedmål er automatikk i informasjonsflyt for MU-data. Å lage en webapplikasjon som samler identiteten til MU-individer, og derfor gir solid grunnlag til en nasjonal forening av informasjon om MU på tvers av helseforetak. Vi ønsker å utvikle en løsning nært med oppdragsgiver for å sørge for at de får en løsning de er fornøyd med.

                    </p>

                </div>

                <div class="row">

                    <h2 class="page-header">2.1 Forkortelser <div class="text-muted">I alfabetisk rekkefølge</div></h2>

                    <dl class="dl-horizontal">


                        <br>

                        <dt>FDV-system:</dt>
                        <dd>Forvaltning Drift og Vedlikeholdssystem</dd>

                        <hr>

                        <dt>HF:</dt>
                        <dd>Helseforetak</dd>

                        <hr>

                        <dt>HUS</dt>
                        <dd>Haukeland Universitetssykehus</dd>

                        <hr>

                        <dt>MTU:</dt>
                        <dd>medisinsk teknisk utstyr </dd>

                        <hr>

                        <dt>MU:</dt>
                        <dd>medisinsk utstyr</dd>

                        <hr>

                        <dt>NKKN</dt>
                        <dd>Norsk Koding, Klassifisering og Nomenklatur</dd>

                        <hr>

                        <dt>UNN:</dt>
                        <dd>Universitetssykehuset Nord-Norge</dd>

                        <hr>

                    </dl>

                </div>

                <div class="row">

                    <h1 class="page-header">3 Dagens situasjon</h1>

                    <h2 class="page-header">3.1 Plattform</h2>

                    <p>

                        Dagens situasjon for NKKN-databasen er en nettside for oppslag i en tabellsturktur (se <a href="http://nkkn.medtekn.no/">http://nkkn.medtekn.no/</a> ) og et separat system for vedlikehold. Selve databasen er hostet på Haukeland Universitetssykehus (HUS). Data overføres til nettsiden når det er ønskelig. Fra nettsiden kan man laste ned kodeverket i XML, og gjøre oppslag i på nettsiden. Nettsiden gir også annen nyttig info og dokuementasjon for NKKN.

                    </p>

                    <h2 class="page-header">3.2 Integrasjoner</h2>

                    <p>

                        NKKN sender data til Merida som er dagens system for forvaltning drift og vedlikehold(FDV-System) av MU. Dette kan importere NKKN-databasen automatisk inn fra nettsiden. Merida holder på å bli faset ut og overtatt av et nytt FDV-system for MU som heter Medusa. Dette systemet vil også importere data fra NKKN og gjør det pr dags dato på samme måte som Merida. Fra nettsiden kan du laste ned XML formatet av databasen og en PDF-fil som beskriver database strukturen.

                    </p>


                    <h2 class="page-header">3.3 Databasen</h2>


                    <p>

                        NKKN-databasen er en database med utstyrskategorier, utstyrsgrupper og utstyrstyper. Dette er begreper som hierarkisk kategoriserer utstyr. Det laveste nivået(utstyrstype) peker på fabrikant og modell. Under dette nivået finner vi alle MU-individene som er lagret i forskjellige databaser rundt om i Norge. Det er også bilder lagret på utstyrstype. Utstyrstype er videre kategorisert på to måter, en lokal type, og en nasjonal type. Den lokale typen er opprettet midlertidig og skal rapporteres inn til NKKN. De nasjonale er uttyrstyper som har blitt validert og implementert i NKKN-databasen. Det er kun én administrator som kan gjøre endringer i databasen.


                    </p>


                    <p> Har en bruker fått MU som ikke finnes i NKKN kan han/hun gjøre to ting:</p>

                    <ul>
                        <li>Opprette lokal type i Merida og klikke på “Overfør til NKKN” med bilder og annen info.</li>
                        <li>Opprette lokal type i Merida og sende informasjonen om denne via epost med bilder og annen data</li>
                    </ul>


                    <p>
                        NKKN validerer da denne informasjonen og sjekker at typen ikke er registrert fra før for å så evt redigere info og registere den som en nasjonal type. Om det er en ny gruppe som skal registreres sjekker man denne mot et engelsk register og oversetter/registrerer denne deretter. Når en ny utstyrsgruppe/type kommer inn gis det manuell beskjed om at databasen er oppdatert.
                    </p>

                </div>



                <div class="row">

                    <h1 class="page-header"4 >Mål og rammebetingelser</h1>


                    <h2 class="page-header">4.1 Mål</h2>



                    <p>Vi ønsker å tilby NKKN en nettløsning som dekker det den eksisterende løsningen dekker. I tillegg må løsningen takle de kravene som stilles til en master-database på et nasjonalt nivå.
                        Dette innebærer å:</p>

                    <ul>
                        <li>Få webløsningen til å fungere godt med den nye Medusa- løsningen</li>
                        <li>Bedre administrasjon av databasen gjennom webgrensesnitt og automatikk.</li>
                        <li>Inkludere andre relevante databaser som er sertifisert og kvalitetssikret</li>
                        <li>Dekke integrasjonsbehovet webløsningen har i forhold til andre systemer</li>
                        <li>Gjøre innrapportering av lokale typer/grupper enklere og mer korrekt</li>
                        <li>Gjøre frontend visuelt enkel for brukere av alle nivå</li>
                        <li>Gjøre backend logisk og responsiv. Skikket til utvidelse og drift i fremtiden</li>
                        <li>Ta med oss oppdragsgiver i alle prosesser rundt utvikling så de får en skreddersydd løsning for deres behov som de er fornøyd med</li>
                        <li>Lage kildekode som kan vedlikeholdes av andre utviklere uten store utfordringer.</li>
                    </ul>


                    <h2 class="page-header">4.2 Teknologier</h2>

                    <ul>
                        <li>MongoDB</li>
                        <li>Express</li>
                        <li>Angular.js</li>
                        <li>node.js</li>
                        <li>HTML5</li>
                        <li>css</li>
                        <li>Twitter bootstrap</li>
                    </ul>

                    <h2 class="page-header">4.3 Rammebetingelser</h2>

                    <p>NKKN har gitt oss ganske frie tøyler på denne oppgaven når det gjelder rammebetingelser, men noen betingelser er det. Løsningen skal: </p>

                    <ul>
                        <li>Fungere med PC (stasjonær, laptop)</li>
                        <li>Om mulig fungere med nettbrett og mobil</li>
                        <li>Fungere med mac og windows (xp og win7)</li>
                        <li>Explorer 8(og fremover), firefox, chrome, samt safari.</li>
                        <li>Det skal være en webapplikasjon for NKKN som skal kunne nås av administrator på steder med internettilkobling.</li>
                        <li>Må kunne inneholde all data til dags dato i NKKN registeret</li>
                        <li>Må kunne være kompatibel med minimum systemer som bruker NKKN i dag</li>

                    </ul>


                </div>

            <div class="row">

                <h1 class="page-header">5 Løsninger</h1>

                <h2 class="page-header">5.1 Generell introduksjon</h2>

                <p>

                    Som alle andre prosjekter er det mye å ta hensyn til når man begynner å snakke om hvilke teknologier man skal utnytte for å utføre oppgaven sin. Som gruppe føler vi at vi har bred erfaring fra tidligere, og har alle jobbet med mange forskellige teknologier. Blant annet, c# java c++ python php javascript og mange fler. Vi ville for dette prosjektet se hva vi får til med helt frie tøyler, noe vi i skolesammenheng ikke har opplevd før. Derfor hadde vi noen få krav, både til arkitektur og teknologier.

                </p>

                <h3 class="text-muted">5.1.1MVC</h3>

                <p>

                    Når det kommer til webutvikling er det få strukturerer som er så populære som mvc. Og dette er jo selvfølgelig av god grunn. I tidligere skoleprosjekter, da primært programutvikling på slutten av 1. klasse, var det ikke noe særlig fokus på lagseparering i våre prosjekter. Mvc er noe vi ønsker å ha høyt fokus på gjennom å ha strenge krav om lagseparering i utviklingen vår. Vi ser for oss at mvc passer prosjektet og vil vise seg å være et kraftig verktøy for oss i hele utviklingsperioden.

                </p>

                <h3 class="text-muted">5.1.2 Thin vs thick client</h3>

                <p>


                    En evig diskusjon er dette med thin vs thick client. Tradisjonelt sett har web stort sett dreid seg om tynne klienter. Noe som er nytt med f.eks MEAN som er den utviklingsmetoden vi skal bruke for vårt prosjekt, er at du tar bort mye av prosesseringen fra serveren, og at i stedet for å distribuere en ferdig behandlet html, er det høyt fokus på å sende pakker av betydelig mindre størelse for å så la mer av behandlingen skje på klientens maskin. Derfor vil vårt prosjekt ende med å være en thick client. Dette vil være essensielt for å takle kravene vi må sette for testing på en nasjonal løsning som vil bli brukt mye.


                </p>

                <h3 class="text-muted">5.1.3 API first</h3>

                <p>

                    Vi skal bygge ett rest API, hovedmålet med å lage systemet på denne måten er at utbyggbarhet og integrasjon skal stå sterkt. Ved å bygge ett API som første steg i prosjektet gir det oss stor frihet til å velge flere forskjellige client side språk, om vi finner ut at det er flere ting vi ønsker å implementere må vi ikke starte helt på nytt med nye connectors for databasen vi skal bruke, men vi kan bare fortsette å bruke de samme endpointene som vi allerede har laget i apiet vårt. Dette vil også være ett public api som vil si at alle som ønsker å bygge en applikasjon som utnytter vår data har muligheten til det.

                </p>

                <h2 class="page-header">5.2 Backend</h2>

                <h3 class="text-muted">5.2.1 MongoDB</h3>

                <p>

                    I motsetning til tradisjonell SQL-databaser lagres ikke i forskjellige tabeller, men heller multidimensjonale arrays som kan gå tilnærmet uendelig dypt. Hvorfor er dette bra for vårt prosjekt? For det første er det lett å modifisere atributter som er lagret per produkt, dette vil jo til en hvis grad være fastsatt fra før. Men i og med at vi skal kombinere vår data med apier vi ikke har kontroll over kommer dette til å være en god sikkerhet å ha med seg videre. Applikasjonen vår skal jobbe med json, som i stor grad er standarden i mange webprogrammeringspråk. Dette gjør at vi kan jobbe direkte med objektene som er lagret i databasen vår. På denne måten ungår vi å parse det til objekter som kan brukes i webappen vår, i og med at formatet allerede er json. Det vil også være veldig få mange til mange relasjoner i databasen vår, noe som gjør at vi hadde vært nødt til å kjøre mange join operasjoner mellom de databasetabellene vi hadde oprettet, noe som koster mye i henhold til serverkapasitet. Man kan lese mer om inventar use caset på følgende link:
                    <a href="http://docs.mongodb.org/ecosystem/use-cases/product-catalog/" target="_blank">http://docs.mongodb.org/ecosystem/use-cases/product-catalog/</a>
                </p>

                <h3 class="text-muted">5.2.2 Node.js</h3>

                <p>

                    Node er et server side programmeringsspråk som lar deg kjøre javascript i backend av applikasjoner. Det er ett non blocking i/o språk og har en hel del funksjoner som gjør det egnet for webutvikling. Som vi sa er Express ett node js rammeverk, så vi kommer til å bruke node+express for å skrive apiet vårt.

                </p>

                <h3 class="text-muted">5.2.3 Express</h3>

                <p>

                    Express er ett rammeverk for node js. I motsetning til f.eks ruby on rails er det unopinionatied hvilket vil si at det ikke er noe bestemmelser rundt hvilke oppgaver rammeverket kan utføre. Express vil bli brukt som request lytter, altså som applikasjonens webserver. Denne skal håndtere alle innkommende requester å levere ut passende data basert på denne. Om vi gjør jobben vår bra, vil dette da primært dreie seg om ren data i form av json. Express blir altså det vi bruker til å skrive APIet vårt. Og så kan alle mulige tjenester kalle vår express server for å få informasjon tilbake.

                </p>

                <h2 class="page-header">5.3 Frontend</h2>

                <h3 class="text-muted">5.3.1 Angular 2</h3>

                <p>

                    Angular er det som kalles ett strukturert rammeverk. Det bruker html som oppskrift for hvordan alle komponentene i systemet ditt skal se ut. Dette gør at du enkelt kan sette inn flere objekter og befolke en liste med mye mindre kode enn med å sette inn moduler med f.eks jquery. Det kan hende vi er nødt til å lage en fallback side for explorer 8, denne nettleseren er ikke støttet av angular etter 1.2

                </p>

                <h3 class="text-muted">5.3.2 Twitter Bootstrap</h3>

                <p>

                    Twitter bootstrap er ett css bibliotek med mange predefinerte css klasser som kan kombineres for sider som skalerer veldig bra. Det er veldig lett å utvide siden sin med egne css filer så man er fortsatt ikke låst inn i bootstrap hele tiden. Dette gjør det til ett fantastisk vekrtøy for plassering av elementer på websider. Flere av oss har god erfaring med bootstrap noe som gør det til den ideelle layout manageren for vårt prosjekt.

                </p>

                <h1 class="page-header">6 Analyse av virkninger</h1>

                <p>

                    Teknologivalgene over begrunnes med at målet er å produsere en rask og sikker webapplikasjon, samt det å velge teknologier som er utfordrende og dagsaktuelle. Flere av teknologiene som er valgt er ikke dekket av studieløpet, noe som vil gi oss et større læringsutbytte ved endt prosjekt.

                </p>

                <h2 class="page-header">6.1 Backend</h2>

                <p>

                    Valg av programmeringsspråk sto hovedsaklig mellom Node.js med Express som rammeverk og C# med .NET som rammeverk. Valget falt på Node.js mye på grunn av sikkerhet i form av JSON Web Token (JWT). I tillegg har to av tre av oss kjennskap til .NET fra tidligere kurs, så Node vil også utvide vår kompetanse.

                </p>

                <p>

                    Ved valg av database har gruppen valgt å gå for MongoDB fremfor en tradisjonell SQL-database. Her er en av hovedgrunnene for valget hastighet (se figur 1), da databasen i webplatformen vil komme til å være stor. MongoDB lar deg også integrere data på en lettere og raskere måte.

                </p>

                <h2 class="page-header">6.2 Frontend</h2>

                <p>

                    Valget av Bootstrap som CSS-rammeverk var det letteste valget av teknologier som ble gjort. Bootstrap er det mest brukte rammeverket for webutvikling og er derfor en teknologi som er viktig for utviklere å beherske og vedlikeholde.

                </p>

                <p>

                    Angular er også en teknologi som gruppen har noe kjennskap til, men det er fortsatt mye som gruppen må sette seg inn i. Angular er meget raskt, da Angular opdaterer informasjon basert på forandring i dataen, noe som er viktig for dette prosjektet.

                </p>

            </div>



        </div>
    </div>
</article>